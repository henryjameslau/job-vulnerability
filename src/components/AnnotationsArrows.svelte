<script>
	import { getContext } from 'svelte';
	import { line, curveBasis } from 'd3-shape'

	const { width, height, xScale, yScale } = getContext('LayerCake');

	export let chartAnnotations = []
	export let strokewidth = 2
	export let stroke = "#206095"
	export let hiddenOnMobile = false
	export let arrowheads = false;
	// export let direction = "clockwise"

	const lineGenerator = line().curve(curveBasis)
	.x(function(d){return $xScale(d[0])})
	.y(function(d){return $yScale(d[1])})

</script>

<g class='annotations {hiddenOnMobile ? "hidden-on-mobile" : ""}'>
	{#each chartAnnotations as d}
		<path class='anno' {stroke} stroke-width={strokewidth} marker-end={arrowheads == true ? 'url(#arrowhead)' : null} d='M {$xScale(d.x)} {$yScale(d.y)} {lineGenerator([[d.dx,d.dy],[d.x,d.y]])}'></path>
	{/each}
</g>

<style>
.anno{
	fill:none;
}
</style>
