<script>
	import { getContext } from 'svelte';

	const { width, height, xScale, yScale } = getContext('LayerCake');

	export let chartAnnotations = []
	export let colour = "#414042";
	export let hiddenOnMobile = false;

	function fillStyle(d){
		var leftright;

		if(d.note.align=="left"){
			leftright="left:"+$xScale(d.dx)+"px;"
		}else if(d.note.align=="right"){
			leftright="right:"+($width-$xScale(d.dx))+"px;text-align:right;"
		}else if(d.note.align=="middle"){
			leftright="left:"+($xScale(d.dx)-d.note.wrap/2)+"px;text-align:center;"
		}

		return leftright


	}

</script>

<div class='annotationLabels {hiddenOnMobile ? "hidden-on-mobile" : ""}'>
	{#each chartAnnotations as d}
			<div class="layercake-annotation" style="{fillStyle(d)} bottom:{$height-$yScale(d.dy)}px;width:{d.note.wrap}px; color:{colour}">{d.note.label}</div>
	{/each}
</div>

<style>
	.layercake-annotation{
		position:absolute;
		/* color:#222222; */
		font-size:16px;
	}
</style>
